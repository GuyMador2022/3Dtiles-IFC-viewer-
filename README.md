# 🏗️ Collabo4D - צופה מאוחד IFC ו-3D Tiles

מערכת צפייה מתקדמת המשלבת קבצי IFC (Building Information Modeling) וקבצי 3D Tiles בסביבה אחת.

## ✨ תכונות חדשות

### 🚶 ניווט WASDQE (חדש!)
- **הפעלה/כיבוי**: `N` - הפעלת/כיבוי מצב ניווט WASDQE
- **תנועה בסיסית**:
  - `W` / `↑` - קדימה
  - `S` / `↓` - אחורה  
  - `A` / `←` - שמאלה
  - `D` / `→` - ימينה
  - `Q` - מטה
  - `E` - למעלה
- **מהירות**:
  - `Shift` - ריצה (פי 2)
  - `+` / `=` - הגדלת מהירות
  - `-` / `_` - הקטנת מהירות
- **יציאה**: `ESC` - יציאה ממצב ניווט

### 🏢 בחירת קומות
- בחירה והצגה/הסתרה של קומות בבניין
- ממשק אינטואיטיבי לניהול שכבות

### 🎯 בחירת אלמנטים
- לחיצה על אלמנטים IFC לבחירה
- הדגשה חזותית של האלמנט הנבחר
- הצגת מאפייני האלמנט

## 🚀 הפעלה מהירה

### דרישות מוקדמות
- שרת HTTP מקומי (לא ניתן לפתוח ישירות מהדפדפן)
- דפדפן מודרני התומך ב-ES6 modules

### הפעלה באמצעות Python
```bash
# עבור Python 3
cd "C:\Users\PC\Desktop\Collabo4D\IFC+3Dtiles viewer\UnifiedViewer"
python -m http.server 8000

# עבור Python 2
python -m SimpleHTTPServer 8000
```

### הפעלה באמצעות Node.js
```bash
npm install -g http-server
cd "C:\Users\PC\Desktop\Collabo4D\IFC+3Dtiles viewer\UnifiedViewer"
http-server -p 8000
```

### פתיחה בדפדפן
פתח בדפדפן: `http://localhost:8000`

## 🎮 מדריך שימוש

### שלב 1: טעינת קבצים
1. לחץ על "טען נתוני Sano" לטעינת הנתונים המוכנים
2. או השתמש בכפתורי "טען IFC" ו"טען 3D Tiles" בנפרד

### שלב 2: ניווט במרחב
1. **מצב עכבר** (ברירת מחדל):
   - גרירה - סיבוב מצלמה
   - גלגלת - זום
   - לחיצה - בחירת אלמנטים

2. **מצב WASDQE**:
   - לחץ `N` או על כפתור "🚶 ניווט"
   - השתמש במקשי WASD/חצים לתנועה
   - לחץ `ESC` לחזרה למצב עכבר

### שלב 3: כלים מתקדמים
- **🏢 קומות** - בחירת קומות להצגה
- **❓ עזרה** - הצגת מקשי קיצור
- **📏 מדידה** - מדידת מרחקים (בפיתוח)
- **✂️ חתך** - יצירת חתכים (בפיתוח)

## 🗂️ מבנה הפרויקט

```
UnifiedViewer/
├── index.html              # ממשק המשתמש הראשי
├── test_navigation.html    # בדיקת ניווט
├── src/
│   ├── UnifiedViewer.js    # המחלקה הראשית
│   ├── ThreeDTilesLoader.js # טוען 3D Tiles
│   └── SanoDataLoader.js   # טוען נתוני Sano
├── lib/
│   ├── three.min.js        # ספריית Three.js
│   ├── IFCLoader.js        # טוען IFC
│   └── OrbitControls.js    # בקרות מצלמה
└── debug/                  # כלי פיתוח
```

## 🎯 נתונים נתמכים

### קבצי IFC
- תקן IFC2x3, IFC4
- תמיכה בגיאומטריה מורכבת
- מאפייני אלמנטים
- מידע על קומות

### קבצי 3D Tiles
- B3DM (Batched 3D Model)
- PNTS (Point Cloud)
- JSON מטאדטה
- היררכיה של Tiles

## 🔧 פיתוח

### הוספת תכונות חדשות
1. הוסף פונקציות ל-`UnifiedViewer.js`
2. הוסף כפתורים ב-`index.html`
3. עדכן את ה-CSS בהתאם

### דיבוג
- פתח Developer Console (F12)
- השתמש ב-`unifiedViewer.debug()` להדפסת מידע
- בדוק את `test_navigation.html` לבדיקת ניווט

## 🐛 פתרון בעיות

### שגיאות JavaScript
- פתח את `debug_errors.html` לבדיקה מהירה
- בדוק שכל הפונקציות נטענו כראוי
- ודא שאין שגיאות בקונסול

### הקבצים לא נטענים
- ודא שהשרת פועל על port 8000
- בדוק שהנתיבים לקבצים נכונים
- ודא שאין חסימות CORS

### הכפתורים לא עובדים
- ודא ש-`unifiedViewer` נטען (לא `UnifiedViewer`)
- בדוק בקונסול שגיאות של "Cannot read properties of null"
- רענן את הדף ונסה שוב

### הניווט לא עובד
- לחץ `N` להפעלת מצב WASDQE
- ודא שהמיקוד על הדף (לחץ על הרקע)
- בדוק ב-Console שאין שגיאות JavaScript

### ביצועים איטיים
- קבצי 3D Tiles גדולים עשויים לקחת זמן לטעינה
- השתמש בכלי הדיבוג לבדיקת מצב הטעינה

## 🧪 כלי דיבוג

### בדיקת שגיאות
פתח `debug_errors.html` לבדיקה מהירה של:
- טעינת UnifiedViewer
- זמינות פונקציות עיקריות
- שלמות DOM elements
- שגיאות JavaScript

## 📞 תמיכה

לשאלות ובעיות:
1. בדוק את ה-Console לשגיאות
2. השתמש ב-`test_navigation.html` לבדיקות בסיסיות
3. ודא שכל הקבצים במקום

## 🔄 עדכונים אחרונים

### גרסה נוכחת
- ✅ ניווט WASDQE מלא
- ✅ בחירת אלמנטים IFC
- ✅ ממשק כלים מתקדם
- ✅ תמיכה בנתוני Sano
- ✅ טעינת קבצי IFC ו-3D Tiles

### בפיתוח
- 🚧 מדידת מרחקים
- 🚧 יצירת חתכים
- 🚧 ייצוא מידע
- 🚧 ממשק בחירת קומות מתקדם

---

**📝 הערה**: מערכת זו פותחה עבור עבודה עם נתוני Sano ומרלוג. לשימוש עם נתונים אחרים, יש לעדכן את הנתיבים בקוד.